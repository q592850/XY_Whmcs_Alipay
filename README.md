# 🚀 XY_Whmcs_Alipay 插件说明文档

**轩辕云 (GlobalIEPL)** 官方出品的 WHMCS 支付宝集成插件，完美支持**当面付**与**电脑网站支付**。

## 🌐 关于轩辕云

* **官网**: [www.globaliepl.com](https://www.globaliepl.com)
* **主营业务**:
* **专线**: IPLC/IEPL (广港、沪港、沪日、沪美、深港)
* **带宽**: 广州、深圳、江苏、温州大带宽服务器
* **VPS**: 温州建站高防系列


* **TG 交流群**: [@cn_iepl](https://t.me/cn_iepl)

---

## 🛠️ 文件结构

插件采用标准的 WHMCS 模块架构，确保与系统核心无缝兼容：

```text
/www/wwwroot/你的域名/
└── modules/
    └── gateways/
        ├── xy_alipay.php           <-- [主文件] 负责后台配置逻辑与前台跳转控制
        └── callback/
            ├── xy_alipay.php       <-- [异步回调] 接收支付宝异步通知，自动完成入账
            └── xy_alipay_pay.php   <-- [智能收银台] 负责路由分发、UI 展示及唤起手机 App

```

---

## 📖 安装与使用指南

### 第一步：部署文件

1. 将下载的插件压缩包解压。
2. 通过 FTP 或面板文件管理器，将 `modules` 文件夹上传至 WHMCS 根目录覆盖（不会影响现有文件）。

### 第二步：激活插件

1. 登录 WHMCS 后台。
2. 导航至：`系统设置 (System Settings)` -> `付款渠道 (Payment Gateways)`。
3. 在 **所有付款渠道 (All Payment Gateways)** 选项卡中：
* 使用搜索框输入关键词 `xy` 或 `alipay`。
* 找到 **XY_Alipay** 并点击激活。



### 第三步：配置参数

在“已激活的付款渠道”中找到该插件，填入以下必要信息：

* **支付宝 AppID**: 你的应用 ID。
* **应用私钥**: 开发者生成的 Private Key。
* **支付宝公钥**: 支付宝后台获取的 Public Key。
* **接口模式**: 根据需求选择“当面付”或“电脑网站支付”。

> [!TIP]
> **温馨提示**：如果激活后在列表里没看到，请确保 `modules/gateways/xy_alipay.php` 文件权限为 `644`，且所有者与 Web 服务一致。

---

## ✨ 插件特性

* **智能路由**：自动识别移动端与桌面端，提供最佳支付交互。
* **丝滑唤起**：手机端直接唤起支付宝 App，提升支付转化率。
* **秒级入账**：基于支付宝异步回调机制，确保订单状态实时更新。

---
